:title-separator: {sp}|
= Developer's Guide | Developing the Occupancy Dashboard
:doctype: article
:revnumber: 1.0
:revdate: 2020-09-02
:revremark: The first incarnation of {doctitle}
:version-label!:
:description: Notes for a developer about decisions made and instructions.
:keywords: dashboard carta bus dash plotly
:sectnums:
:toc:

This guide is to help developer's remember or learn how to work with this project.

== One time setup

If you do not have this environment then create it.

== Running app with Docker

```
docker build -t wegodash .
docker run --memory='4g' --rm -p 8080:8080 wegodash
```

Note we give 4 gigabyte to this. Make sure your docker dashboard has enough resources enabled. 

Go to your browser and open http://127.0.0.1:8080. It should look like below.

image::docs/dashboard.png[Dashboard image]


== Development instructions
Check your environments.

[source,bash]
----
conda env list
----
Remove as needed.

[source,bash]
----
conda --yes remove --name transit_dashboard --all
----
Create and activate the new environment.

[source,bash]
----
conda create --name transit_dashboard python=3.8
conda activate transit_dashboard
----

Add the packages into the new environment.
It is tempting [to use pip](
https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#using-pip-in-an-environment).
It may be that some packages are not available in the main conda repositories for your platform.
In that case you may need to add additional channels.

[source,bash]
----
# conda config --prepend channels conda-forge
conda config --set channel_priority false

conda install --yes --file requirements.txt
----

== converting between basic python and notebooks

use ipynb-py-convert

[source,bash]
----
conda --yes install ipynb-py-convert
----

== Running app

[source,bash]
----
conda activate transit_dashboard
python app.py
----



